// Dependencies
var _ = require('underscore');
var config = require('./config');
var MysqlConnectionPool = require('./index');

var pool = new MysqlConnectionPool( _.map(config.hosts, function(host){
    return {
        host     : host,
        user     : config.user,
        password : config.password,
        database : config.database
    };
}));

// Hand-testing the api
pool.open();
pool.query('show tables;', console.log);
setTimeout(function(){pool.close();}, 3000);